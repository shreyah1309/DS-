#include <stdio.h>
#include <stdlib.h>

struct node {
    int data;
    struct node *next;
};

struct node *head = NULL;

void insertFirst(int x) {
    struct node *t = malloc(sizeof(struct node));
    t->data = x;
    t->next = head;
    head = t;
}

void insertEnd(int x) {
    struct node *t = malloc(sizeof(struct node));
    struct node *p = head;
    t->data = x;
    t->next = NULL;

    if (head == NULL) {
        head = t;
        return;
    }

    while (p->next != NULL)
        p = p->next;

    p->next = t;
}

void insertAtPos(int x, int pos) {
    struct node *t = malloc(sizeof(struct node));
    struct node *p = head;
    int i;

    t->data = x;

    if (pos == 1) {
        t->next = head;
        head = t;
        return;
    }

    for (i = 1; i < pos - 1 && p != NULL; i++)
        p = p->next;

    if (p == NULL) {
        printf("Invalid position\n");
        free(t);
        return;
    }

    t->next = p->next;
    p->next = t;
}

void display() {
    struct node *p = head;
    if (p == NULL) {
        printf("List is empty\n");
        return;
    }

    while (p != NULL) {
        printf("%d -> ", p->data);
        p = p->next;
    }
    printf("NULL\n");
}

int main() {
    int ch, x, pos;

    while (1) {
        printf("\n1.Insert First\n2.Insert End\n3.Insert at Position\n4.Display\n5.Exit\n");
        printf("Enter choice: ");
        scanf("%d", &ch);

        switch (ch) {
        case 1:
            printf("Enter value: ");
            scanf("%d", &x);
            insertFirst(x);
            break;

        case 2:
            printf("Enter value: ");
            scanf("%d", &x);
            insertEnd(x);
            break;

        case 3:
            printf("Enter value and position: ");
            scanf("%d %d", &x, &pos);
            insertAtPos(x, pos);
            break;

        case 4:
            display();
            break;

        case 5:
            exit(0);

        default:
            printf("Invalid choice\n");
        }
    }
}
